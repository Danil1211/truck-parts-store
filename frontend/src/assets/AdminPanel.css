/* ========================================================================== */
/* Base / reset */
/* ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

:root,
.admin-root {
  --bg: #f6f9fb;
  --surface: #ffffff;

  --primary: #117fff;
  --primary-dark: #0b5ed7;

  --text-main: #0f172a;
  --text-secondary: #64748b;

  --sidebar-bg: rgba(255,255,255,.82);
  --sidebar-active: #117fff;

  --topbar-h: 56px;
  --sidebar-w: 76px;
  --submenu-w: 240px;

  --ctl-h: 36px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html, body {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans";
}

/* ========================================================================== */
/* Layout bits (topbar/sidebar/common) — без изменений */
/* ========================================================================== */
.admin-layout { display:flex; height:100vh; width:100vw; min-width:360px; overflow:hidden; }
.admin-topbar {
  position: fixed; inset: 0 0 auto 0; height: var(--topbar-h);
  display:flex; align-items:center; justify-content:space-between; padding:0 16px; z-index:200;
  background: rgba(255,255,255,.82);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 1px solid rgba(0,0,0,.06);
}
.admin-topbar-left{ display:flex; align-items:center; gap:16px; min-width:0; }
.admin-topbar-right{ display:flex; align-items:center; gap:12px; }

.admin-sidebar{
  position: fixed; top:0; left:0; bottom:0; width:var(--sidebar-w);
  display:flex; flex-direction:column; align-items:center;
  padding: calc(12px + var(--topbar-h)) 0 16px;
  background: var(--sidebar-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-right: 1px solid rgba(0,0,0,.06);
  z-index:150;
}

.admin-content{
  flex:1; min-width:0; height:100vh; overflow:auto; background: var(--bg);
  position:relative; padding-top: var(--topbar-h); padding-left: 0;
}
.admin-content.with-submenu{ padding-left: calc(var(--sidebar-w) + var(--submenu-w)); }

.admin-nav-menu{
  position: fixed; top: var(--topbar-h); left: var(--sidebar-w);
  height: calc(100vh - var(--topbar-h)); width: var(--submenu-w);
  background: rgba(255,255,255,.82);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-right: 1px solid rgba(0,0,0,.06); padding:12px 0; z-index:120;
}

/* ========================================================================== */
/* Products header */
/* ========================================================================== */
.products-page{ padding: 0 0 38px 0; }

.products-header{
  position: fixed; top: var(--topbar-h);
  left: calc(var(--sidebar-w) + var(--submenu-w)); right: 0; height: 64px;
  display:flex; align-items:center; justify-content:flex-start; gap:16px; padding:0 20px;
  background:#fff; border-bottom:1px solid rgba(0,0,0,.06); box-shadow:0 1px 2px rgba(0,0,0,.04);
  z-index:130;
}
@media (max-width:1100px){ .products-header{ left: var(--sidebar-w); } }

.products-header-left{ display:flex; align-items:center; gap:12px; flex:0 1 auto; min-width:0; }
.products-header-right{ margin-left:auto; flex:0 0 auto; }

.products-h1{ font-weight:500; font-size:17px; color:#0f172a; white-space:nowrap; }
.products-count{ color:#007aff; }

.products-header-left .products-search-compact{
  height: 38px; line-height: 38px; padding: 0 14px 0 34px;
  width: 280px; max-width: 45vw; flex: 0 0 280px;
  border-radius: 12px; border: 1px solid #d0d7e2;
  background:
    #f9fbfd
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='%2364758b' stroke-width='2' viewBox='0 0 24 24'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cline x1='16.5' y1='16.5' x2='21' y2='21'/%3E%3C/svg%3E")
    10px 50% no-repeat;
  background-size: 14px; font-size: 14px; color:#0f172a;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
}
.products-header-left .products-search-compact:focus{
  border-color:#007aff; background-color:#fff;
  box-shadow:0 0 0 3px rgba(0,122,255,.15); outline:none;
}

.filters{ position:relative; }
.filters-toggle{
  height: var(--ctl-h); padding: 0 16px; display:inline-flex; align-items:center;
  border:none; border-radius:10px; background:#eaf4ff; color:#2291ff; font-weight:500; cursor:pointer;
}
.filters-popover{
  position:absolute; left:0; top:48px; z-index:150;
  background:#fff; border:1.5px solid #dbefff; border-radius:14px;
  box-shadow:0 12px 44px #2291ff11; min-width:210px; padding:16px 19px; display:flex; flex-direction:column; gap:12px;
}
.filters-select{ padding:7px 13px; border-radius:8px; border:1.5px solid #e4e8ee; background:#f4f7fa; font-size:14px; }
.filters-check{ display:flex; align-items:center; gap:7px; font-weight:500; font-size:15px; }
.filters-apply{ background:#2291ff; color:#fff; font-weight:500; border:none; border-radius:8px; padding:7px 0; margin-top:5px; font-size:15px; cursor:pointer; }

.products-content-wrap{ padding-top: 70px; }
.products-content{ background:#fff; border-radius:0; box-shadow:none; padding:16px 20px 24px; min-height:280px; }

/* ========================================================================== */
/* Products grid — ФИНАЛЬНАЯ 8-колоночная версия (без дублей) */
/* ========================================================================== */

.products-grid-header{
  position: sticky; top: 0; z-index: 2;
  display: grid;
  grid-template-columns:
    80px                        /* фото */
    minmax(220px, 2.2fr)        /* название + группа */
    minmax(140px, 1.2fr)        /* дата */
    minmax(120px, 1fr)          /* код */
    minmax(160px, 1.4fr)        /* наличие + опубликован/скрытый */
    minmax(120px, 1fr)          /* цена */
    minmax(100px, 0.9fr)        /* заказы */
    minmax(140px, 1.1fr);       /* действия */
  gap: 14px;
  padding: 0 14px 10px;
  margin: 0 -14px 12px;
  font-weight: 500; font-size: 14px; color: #7a91aa;
  border-bottom: 1.5px solid #e7effa; background:#fff;
}

.product-row{
  display: grid;
  grid-template-columns:
    80px
    minmax(220px, 2.2fr)
    minmax(140px, 1.2fr)
    minmax(120px, 1fr)
    minmax(160px, 1.4fr)
    minmax(120px, 1fr)
    minmax(100px, 0.9fr)
    minmax(140px, 1.1fr);
  align-items: center; gap: 14px;

  background: #f9fbfd; border-radius: 14px; margin-bottom: 12px; padding: 14px;
  box-shadow: 0 2px 6px rgba(17,127,255,0.06), 0 1px 2px rgba(0,0,0,0.05);
  transition: all .18s;
}
.product-row > * { min-width: 0; }
.product-row:hover{ background:#fff; box-shadow:0 4px 12px rgba(17,127,255,0.12); }

/* Ячейки */
.product-photo{
  width: 72px; height: 72px; object-fit: cover;
  border-radius: 12px; background: #e9f3fa;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
}

.product-link{
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden; text-overflow: ellipsis; line-height:1.25;
  font-weight: 600; font-size: 15px; color:#117fff; text-decoration:none;
}
.product-link:hover{ color:#0b5ed7; }

.product-group{ margin-top: 4px; font-size: 13px; color:#64748b; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.product-date{ color:#93a1b5; font-size:13px; white-space: nowrap; }
.product-sku{ font-weight:600; color:#2291ff; font-size:14px; white-space: nowrap; }

.cell-state{ display:flex; flex-direction:column; gap:6px; min-width:0; }
.avail{ font-weight:700; font-size:14px; }
.avail.published{ color:#24c471; }
.avail.order{ color:#ef9c19; }
.avail.out{ color:#e12a2a; }

.pub{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 8px; border-radius:999px; font-size:12.5px; font-weight:600;
  width: fit-content; white-space: nowrap; border:1px solid transparent;
}
.pub.on{ background:#e9f9f0; color:#15803d; border-color:#b7f0cc; }
.pub.off{ background:#f2f4f7; color:#475569; border-color:#e2e8f0; }

.product-price{ font-weight:700; font-size:15px; color:#0f172a; white-space: nowrap; }

.cell-orders{ text-align:center; }
.orders-badge{
  display:inline-flex; align-items:center; justify-content:center;
  min-width: 38px; height: 28px; padding: 0 10px;
  border-radius: 999px; font-weight: 700; font-size: 13.5px;
  background:#eef5ff; color:#0b5ed7; border:1px solid #d7e6ff;
}

.cell-actions{ display:flex; justify-content:flex-end; }
.actions{ position:relative; }
.actions-toggle{
  background:#f1f7ff; color:#2291ff; border:none; border-radius:10px;
  padding:6px 13px; font-weight:500; font-size:14px; cursor:pointer;
  box-shadow:0 2px 6px rgba(34,145,255,0.15); transition:all .18s;
}
.actions-toggle:hover{ background:#e2efff; box-shadow:0 3px 10px rgba(34,145,255,0.25); }
.actions-menu{
  position:absolute; top:42px; right:0; background:#fff; border:1px solid #e3f1ff;
  border-radius:10px; min-width:160px; padding:4px 0; z-index:100;
  box-shadow:0 8px 30px rgba(34,145,255,0.17); display:flex; flex-direction:column;
}
.actions-item{
  background:none; border:none; padding:10px 14px; text-align:left;
  font-weight:500; font-size:14px; cursor:pointer; transition:background .13s;
}
.actions-item.edit{ color:#157ce8; } .actions-item.delete{ color:#e84242; }
.actions-item:hover{ background:#f6f9ff; }

/* Адаптив: при узких экранах можно скрыть второстепенные колонки */
@media (max-width: 900px){
  .products-grid-header { grid-template-columns: 80px 2fr 1fr 1fr 1.4fr; }
  .product-row { grid-template-columns: 80px 2fr 1fr 1fr 1.4fr; }
  .products-grid-header > :nth-child(6),
  .products-grid-header > :nth-child(7),
  .products-grid-header > :nth-child(8),
  .product-row > .cell-price,
  .product-row > .cell-orders,
  .product-row > .cell-actions { display:none; }
}

@media (max-width: 1100px){
  .admin-nav-menu{ display:none; }
  .admin-content.with-submenu{ padding-left: var(--sidebar-w); }
  .products-header{ left: var(--sidebar-w); }
}
